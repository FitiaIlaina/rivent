{% extends "base.html" %}

{% block title %}Admin Dashboard - Réservations{% endblock %}

{% block header %}
<header>
    <nav class="navbar navbar-light navbar-expand-md navigation-clean-button">
        <div class="container">
            <a class="navbar-brand" href="#">RI'vent Admin Dashboard</a>
            <button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav mr-auto"></ul>
                <span class="navbar-text actions">
                    <a class="login" href="">
                        {{ session.name }} {{ session.surname }}
                    </a>
                    <a class="btn btn-light action-button" role="button" id="logout-btn" href="#">Se déconnecter</a>
                    <div id="logout-modal" class="modal">
                        <div class="modal-content">
                            <p style="color:black;">Voulez-vous vraiment vous déconnecter ?</p>
                            <button id="confirm-logout" class="confirm btn btn-success" style="background-color: #17a2b8;">Oui</button>
                            <button id="cancel-logout" class="cancel btn btn-danger" style="background-color:#333;">Non</button>
                        </div>
                    </div>
                </span>
            </div>
        </div>
    </nav>
</header>
{% endblock %}

{% block content %}
<div class="container-fluid" style="padding: 30px;">
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-white bg-primary mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="bi bi-people"></i> Utilisateurs</h5>
                    <a href="/admin/liste_utilisateur" class="btn btn-light btn-sm">Voir la liste</a>
                </div>
            </div>
        </div>
       
        <div class="col-md-3">
            <div class="card text-white bg-info mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="bi bi-person-badge"></i> Organisateurs</h5>
                    <a href="/admin/organisateur" class="btn btn-light btn-sm">Voir la liste</a>
                </div>
            </div>
        </div>
         <div class="col-md-3">
            <div class="card text-white bg-success mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="bi bi-calendar-check"></i> Réservations</h5>
                    <a href="/admin/reservations" class="btn btn-light btn-sm">Voir la liste</a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-warning mb-3">
                <div class="card-body">
                    <h5 class="card-title"><i class="bi bi-envelope"></i> Messages</h5>
                    <a href="/admin/message" class="btn btn-light btn-sm">Voir la boîte</a>
                </div>
            </div>
        </div>
    </div>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="alert alert-success">
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <div class="row">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <i class="bi bi-calendar-check"></i> Liste des réservations
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nom de l'utilisateur</th>
                                <th>Événement</th>
                                <th>Ticket</th>
                                <th>Nombres</th>
                                <th>Date</th>
                                <th>Prix Total</th>
                           
                                
                            </tr>
                        </thead>
                        <tbody>
                            {% for reservation in reservations %}
                            <tr>
                                <td>{{ reservation.id }}</td>
                                <td>{{ reservation.name }} {{ reservation.surname }}</td>
                                 <td>{{ reservation.event_title }}</td>
                                <td>{{ reservation.ticket_type }}</td>
                                <td>{{ reservation.quantity }}</td>
                                <td>{{ reservation.reservation_date }}</td>
                                <td>{{ reservation.total_price }} <strong>Ariary</strong></td>
                                
                                
                               
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="6" class="text-center">Aucune réservation trouvée.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}